<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>AIM</title>
        <style>
</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
        
        
    </head>
    <body class="vscode-body vscode-light">
        <center><h3>CS684: Embedded System Course</h3></center>
<center><h4>Lab 1: Bar-graph LEDs and Interrupt Switch Interfacing</h4></center>
<hr>
<h4 id="aim">AIM</h4>
<p>In this experiment, you will interface the Bar-graph LEDs and the Interrupt Switch to ATmega2560. The aim of this experiment is to get you familiar with the configuring and interfacing of Input and Output devices.</p>
<p>Your task is to toggle the status of 2 Bar-graph LEDs depending on whether the Interrupt Switch is pressed or released.</p>
<p>The program is provided as <strong>Eclipse</strong> project. But, the program contains few incomplete functions which you would have to complete as per the instructions present in the comments.</p>
<hr>
<h4 id="connections">CONNECTIONS</h4>
<ul>
<li>
<p>Interrupt Switch :  <b>PD2</b></p>
</li>
<li>
<p>Bar-graph LED:</p>
<ul>
<li>
<pre><code>   	  LED 2   --&gt;   &lt;b&gt;PB1&lt;/b&gt;
</code></pre>
</li>
<li>
<pre><code>   	  LED 6   --&gt;   &lt;b&gt;PB5&lt;/b&gt;
</code></pre>
</li>
<li>
<pre><code>   	  LED 8   --&gt;   &lt;b&gt;PB0&lt;/b&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="procedure">PROCEDURE</h4>
<p><strong>Step-1:</strong>  Open the project <strong>lab1_sw_led</strong> from <strong>Lab_1</strong> folder. Start Eclipse, click on <em>File &gt; Open Projects From File System &gt; Directory</em> and browse for <strong>lab1_sw_led</strong> folder to open the project.</p>
<p><strong>Step-2:</strong> In <strong>src/eBot_Sandbox.cpp</strong>, complete the <strong>Lab1_SW_LED</strong> function to achieve the following:</p>
<ol>
<li>Check whether the Interrupt Switch is pressed or not.</li>
<li>If the Interrupt Switch is pressed, only the <strong>2nd</strong> LED will turn OFF and the <strong>8th</strong> LED will turn ON.</li>
<li>If the Interrupt Switch is not pressed, the <strong>2nd</strong> LED will remain ON and only <strong>8th</strong> LED will turn OFF.</li>
</ol>
<blockquote>
<p><strong>Note:</strong> While completing, you have to use following functions defined in <b>eBot_MCU_Predef.h</b> header file:</p>
</blockquote>
<ol>
<li>bool interrupt_switch_pressed (void);</li>
<li>void turn_on_bar_graph_led (unsigned char);</li>
<li>void turn_off_bar_graph_led (unsigned char);</li>
</ol>
<p><strong>Step-3:</strong> You will notice some pre-written function stubs in <strong>src/eBot_MCU_Predef.c</strong> included for your assistance related to Bar-graph LEDs and Interrupt Switch. Complete the pre-written functions with the help of comments provided.</p>
<p><strong>Step-4:</strong> In the Package Explorer (left pane), right click on <strong>src</strong> folder and select <em><strong>Show in Local Terminal --&gt; Terminal</strong></em>(bottom pane). Type the following command in the terminal:</p>
<pre><code class="language-bash"><div>avr_hex_file_generator -cpp src/lab1_sw_led_main -dcpp src/eBot_Sandbox -dc src/eBot_MCU_Predef -m atmega328p
</div></code></pre>
<p>If there are no errors present in your program, the project will get compiled correctly and you will get the  message as shown below, Also, <strong>build</strong> folder will be generated in project directory that will contain <strong>lab1_sw_led_main.hex</strong> file along with other build files.</p>
<pre><code class="language-pseudocode"><code><div>**======== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========**
</div></code></code></pre>
<p><strong>Step-4:</strong> Load the hex file on the SimulIDE circuit once your program gets build successfully. Save the project. Ensure that code performs as expected. <strong>NOTE:</strong> Getting <strong>Build succeeded</strong> output doesn't mean that your program will give the expected output as it can contain logical errrors.</p>
<hr>
<h4 id="macros-to-use">MACROS to use</h4>
<ul>
<li>In the skeleton code <strong>eBot_MCU_Predef.c</strong> we have included a header file named, <strong>firebird_simulation.h</strong> which consists of the declaration of the following constants (<em>for atmega328p controller</em>):</li>
</ul>
<pre><code class="language-c"><div> <span class="hljs-comment">//For Interrupt Switch:</span>

 <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	interrupt_sw_ddr_reg		DDRD</span>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	interrupt_sw_port_reg 		PORTD</span>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	interrupt_sw_pin 		2		<span class="hljs-comment">// PD2</span></span>

 <span class="hljs-comment">//For Bar-graph LED:</span>
 
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	bar_graph_led_ddr_reg 		DDRB</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	bar_graph_led_port_reg 	PORTB</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	bar_graph_led_2_pin 		1		<span class="hljs-comment">// PB1</span></span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	bar_graph_led_8_pin 		0		<span class="hljs-comment">// PB0</span></span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> 	bar_graph_led_6_pin 		5		<span class="hljs-comment">// PB5</span></span>
</div></code></pre>
<ul>
<li>You have to use these constants declared in <strong>firebird_simulation.h</strong> and the Masking Operators to complete the lab.</li>
</ul>
<hr>
<h4 id="simulation-expected-output">Simulation: EXPECTED OUTPUT</h4>
<p>â€‹	<strong>Software required:</strong> SimulIDE AppImage (refer Installation Guide provided to you)</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iA9HXVOefkY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="z-index:5;position:relative;"></iframe>
<hr>
<h4 id="submission-instructions">SUBMISSION INSTRUCTIONS</h4>

    </body>
    </html>